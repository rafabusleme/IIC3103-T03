{"version":3,"sources":["components/Chat/components/Message.jsx","components/Chat/index.jsx","components/FlightsInfo/components/InfoCard.jsx","components/FlightsInfo/index.jsx","components/FlightTracker/index.jsx","App.jsx","constants.js","index.js"],"names":["Message","name","message","date","left","formattedDate","Date","className","getHours","getMinutes","Chat","socket","useState","messages","setMessages","setMessage","nickname","setNickname","displayChat","setDisplayChat","useEffect","on","data","console","log","prevState","disconnect","map","index","type","placeholder","value","onChange","e","target","handleMessage","onClick","emit","length","alert","onSetNickName","customStyles","overlay","zIndex","position","top","right","bottom","backgroundColor","content","border","background","overflow","WebkitOverflowScrolling","borderRadius","outline","padding","width","height","Modal","setAppElement","document","getElementsByClassName","InfoCard","props","React","modalIsOpen","setIsOpen","closeModal","code","airline","origin","destination","plane","seats","passengers","isOpen","onRequestClose","style","passenger","key","age","FlightsInfo","flights","setFlights","updateFlights","flight","L","Icon","Default","prototype","_getIconUrl","mergeOptions","shadowSize","iconSize","Point","redOptions","color","blackOptions","FlightTracker","positions","setPositions","path","setPath","MapContainer","center","zoom","scrollWheelZoom","TileLayer","attribution","url","Object","keys","Marker","Popup","Polyline","pathOptions","App","io","transports","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.6960e3ec.chunk.js","sourcesContent":["import React from 'react';\n\nimport '../styles.css';\n\nfunction Message({ name, message, date, left }) {\n  const formattedDate = new Date(date);\n  return (\n    <div className={left ? 'left-message' : 'right-message'}>\n      <p>\n        {name} - {`${formattedDate.getHours()}:${formattedDate.getMinutes()}`}\n      </p>\n      {message}\n    </div>\n  );\n}\n\nexport default Message;\n","import React, { useEffect, useState } from 'react';\n\nimport Message from './components/Message';\n\nimport './styles.css';\n\nfunction Chat({ socket }) {\n  const [messages, setMessages] = useState([]);\n  const [message, setMessage] = useState('');\n  const [nickname, setNickname] = useState('');\n  const [displayChat, setDisplayChat] = useState(false);\n\n  function handleMessage(e) {\n    setMessage(e.target.value);\n  }\n\n  function sendMessage() {\n    socket.emit('CHAT', { name: nickname, message });\n    setMessage('');\n  }\n\n  function onSetNickName() {\n    if (nickname.length > 0) return setDisplayChat(true);\n    alert('Debes elegir un nombre válido');\n  }\n\n  useEffect(() => {\n    socket.on('CHAT', (data) => {\n      console.log(data);\n      setMessages((prevState) => [...prevState, data]);\n    });\n\n    return () => socket.disconnect();\n  }, []);\n\n  return (\n    <div className=\"chat\">\n      <div className=\"box-message\">\n        <h1>Chat - {nickname}</h1>\n        <div className=\"messages\">\n          {messages.map((message, index) => (\n            <Message\n              key={index}\n              name={message.name}\n              message={message.message}\n              date={message.date}\n              left={!(message.name === nickname)}\n            />\n          ))}\n        </div>\n        {!displayChat ? (\n          <div className=\"send\">\n            <input\n              type=\"text\"\n              placeholder=\"Elige un nickname...\"\n              value={nickname}\n              onChange={(e) => setNickname(e.target.value)}\n            />\n            <button onClick={() => onSetNickName()}>Elegir</button>\n          </div>\n        ) : (\n          <div className=\"send\">\n            <input\n              type=\"text\"\n              placeholder=\"Escribe un mensaje...\"\n              value={message}\n              onChange={(e) => handleMessage(e)}\n            />\n            <button onClick={() => sendMessage()}>Enviar</button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default Chat;\n","/* eslint-disable no-unused-vars */\nimport React from 'react';\n\nimport Modal from 'react-modal';\n\nconst customStyles = {\n  overlay: {\n    zIndex: 1000,\n    position: 'fixed',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    backgroundColor: 'rgba(255, 255, 255, 0.75)',\n  },\n  content: {\n    position: 'absolute',\n    top: '40px',\n    left: '40px',\n    right: '40px',\n    bottom: '40px',\n    border: '1px solid #ccc',\n    background: '#fff',\n    overflow: 'auto',\n    WebkitOverflowScrolling: 'touch',\n    borderRadius: '4px',\n    outline: 'none',\n    padding: '20px',\n    width: '50%',\n    height: '50%',\n  },\n};\n\nModal.setAppElement(document.getElementsByClassName('info-card'));\n\nfunction InfoCard({ props }) {\n  let subtitle;\n  const [modalIsOpen, setIsOpen] = React.useState(false);\n  function openModal() {\n    setIsOpen(true);\n  }\n\n  // function afterOpenModal() {\n  //   // references are now sync'd and can be accessed.\n  //   subtitle.style.color = '#f00';\n  // }\n\n  function closeModal() {\n    setIsOpen(false);\n  }\n  const { code, airline, origin, destination, plane, seats, passengers } = props;\n  return (\n    <div className=\"info-card\">\n      <p>Código: {code}</p>\n      <p> Aerolinea: {airline}</p>\n      <button onClick={openModal}>+</button>\n      {/* Origen: {origin} - Destino: {destination}\n      Avion: {plane}\n      Asientos: {seats} */}\n      <Modal isOpen={modalIsOpen} onRequestClose={closeModal} style={customStyles}>\n        <div>\n          <h4>Datos del vuelo {code}</h4>\n          <p>\n            Aerolinea: {airline} Avión: {plane} Asientos: {seats}\n          </p>\n          <p>\n            Origen: {origin} Destino: {destination}\n          </p>\n          <h4>Pasajeros</h4>\n          {passengers.map((passenger, key) => (\n            <p key={key}>\n              Nombre: {passenger.name} Edad: {passenger.age}\n            </p>\n          ))}\n        </div>\n        <button onClick={closeModal}>Cerrar</button>\n      </Modal>\n    </div>\n  );\n}\n\nexport default InfoCard;\n","import React, { useEffect, useState } from 'react';\n\nimport InfoCard from './components/InfoCard';\n\nimport './styles.css';\n\nfunction FlightsInfo({ socket }) {\n  const [flights, setFlights] = useState([]);\n\n  function updateFlights() {\n    socket.emit('FLIGHTS', {});\n  }\n\n  useEffect(() => {\n    socket.on('FLIGHTS', (data) => {\n      setFlights(data);\n    });\n    updateFlights();\n    return () => socket.disconnect();\n  }, []);\n\n  return (\n    <div className=\"info-container\">\n      <button onClick={() => updateFlights()}>Actualizar</button>\n      <div className=\"info\">\n        {flights.map((flight, index) => (\n          <InfoCard key={index} props={flight} />\n        ))}\n      </div>\n    </div>\n  );\n}\n\nexport default FlightsInfo;\n","import React, { useEffect, useState } from 'react';\n\nimport L from 'leaflet';\nimport { MapContainer, TileLayer, Marker, Popup, Polyline } from 'react-leaflet';\n\nimport './styles.css';\nimport 'leaflet/dist/leaflet.css';\n\ndelete L.Icon.Default.prototype._getIconUrl;\n\nL.Icon.Default.mergeOptions({\n  shadowSize: null,\n  iconSize: new L.Point(40, 40),\n  className: 'airplane-icon',\n});\n\nconst redOptions = { color: 'red' };\nconst blackOptions = { color: 'black' };\n\nfunction FlightTracker({ socket }) {\n  const [flights, setFlights] = useState([]);\n  const [positions, setPositions] = useState({});\n  const [path, setPath] = useState({});\n\n  useEffect(() => {\n    socket.on('FLIGHTS', (data) => {\n      console.log(data);\n      setFlights((prevState) => [...prevState, ...data]);\n    });\n\n    socket.on('POSITION', (data) => {\n      setPositions((prevState) => {\n        const flights = { ...prevState };\n        flights[data.code] = data.position;\n        return flights;\n      });\n      setPath((prevState) => {\n        const flights = { ...prevState };\n        flights[data.code] = prevState[data.code]\n          ? [...prevState[data.code], data.position]\n          : [data.position];\n        return { ...flights };\n      });\n    });\n\n    socket.emit('FLIGHTS', {});\n\n    return () => socket.disconnect();\n  }, []);\n\n  return (\n    <MapContainer className=\"map\" center={[-36, -70]} zoom={5} scrollWheelZoom={false}>\n      <TileLayer\n        attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n        url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n      />\n      {Object.keys(positions).map((key, index) => (\n        <Marker key={key} position={positions[key]}>\n          <Popup>{key}</Popup>\n        </Marker>\n      ))}\n      {Object.keys(path).map((key, index) => (\n        <Polyline key={key} positions={path[key]} pathOptions={blackOptions} />\n      ))}\n      {flights.map((flight, key) => (\n        <Polyline\n          key={key}\n          positions={[flight.origin, flight.destination]}\n          pathOptions={redOptions}\n        />\n      ))}\n    </MapContainer>\n  );\n}\n\nexport default FlightTracker;\n","import React from 'react';\n\nimport { io } from 'socket.io-client';\n\nimport Chat from './components/Chat';\nimport FlightsInfo from './components/FlightsInfo';\n// eslint-disable-next-line import/order\nimport FlightTracker from './components/FlightTracker/';\n\nimport './App.css';\n\nimport { ENDPOINT } from './constants';\n\nfunction App() {\n  const socket = io(ENDPOINT, {\n    path: '/flights/',\n    transports: ['websocket'],\n  });\n\n  return (\n    <div className=\"app-container\">\n      <div className=\"map-container\">\n        <FlightTracker socket={socket} />\n        <FlightsInfo socket={socket} />\n      </div>\n      <div className=\"chat-container\">\n        <Chat socket={socket} />\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","export const ENDPOINT = 'wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl';\n","import React from 'react';\n\nimport ReactDOM from 'react-dom';\n\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}