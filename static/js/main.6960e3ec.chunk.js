(this["webpackJsonpiic3103-t03"]=this["webpackJsonpiic3103-t03"]||[]).push([[0],{103:function(e,t,n){},104:function(e,t,n){},106:function(e,t,n){},107:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n.n(c),o=n(17),i=n.n(o),a=(n(59),n(54)),r=n(13),j=n(2),u=(n(49),n(1));var l=function(e){var t=e.name,n=e.message,c=e.date,s=e.left,o=new Date(c);return Object(u.jsxs)("div",{className:s?"left-message":"right-message",children:[Object(u.jsxs)("p",{children:[t," - ","".concat(o.getHours(),":").concat(o.getMinutes())]}),n]})};var b=function(e){var t=e.socket,n=Object(c.useState)([]),s=Object(j.a)(n,2),o=s[0],i=s[1],a=Object(c.useState)(""),b=Object(j.a)(a,2),d=b[0],O=b[1],p=Object(c.useState)(""),f=Object(j.a)(p,2),h=f[0],m=f[1],x=Object(c.useState)(!1),g=Object(j.a)(x,2),v=g[0],k=g[1];return Object(c.useEffect)((function(){return t.on("CHAT",(function(e){console.log(e),i((function(t){return[].concat(Object(r.a)(t),[e])}))})),function(){return t.disconnect()}}),[]),Object(u.jsx)("div",{className:"chat",children:Object(u.jsxs)("div",{className:"box-message",children:[Object(u.jsxs)("h1",{children:["Chat - ",h]}),Object(u.jsx)("div",{className:"messages",children:o.map((function(e,t){return Object(u.jsx)(l,{name:e.name,message:e.message,date:e.date,left:!(e.name===h)},t)}))}),v?Object(u.jsxs)("div",{className:"send",children:[Object(u.jsx)("input",{type:"text",placeholder:"Escribe un mensaje...",value:d,onChange:function(e){return function(e){O(e.target.value)}(e)}}),Object(u.jsx)("button",{onClick:function(){return t.emit("CHAT",{name:h,message:d}),void O("")},children:"Enviar"})]}):Object(u.jsxs)("div",{className:"send",children:[Object(u.jsx)("input",{type:"text",placeholder:"Elige un nickname...",value:h,onChange:function(e){return m(e.target.value)}}),Object(u.jsx)("button",{onClick:function(){return function(){if(h.length>0)return k(!0);alert("Debes elegir un nombre v\xe1lido")}()},children:"Elegir"})]})]})})},d=n(32),O=n.n(d),p={overlay:{zIndex:1e3,position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.75)"},content:{position:"absolute",top:"40px",left:"40px",right:"40px",bottom:"40px",border:"1px solid #ccc",background:"#fff",overflow:"auto",WebkitOverflowScrolling:"touch",borderRadius:"4px",outline:"none",padding:"20px",width:"50%",height:"50%"}};O.a.setAppElement(document.getElementsByClassName("info-card"));var f=function(e){var t=e.props,n=s.a.useState(!1),c=Object(j.a)(n,2),o=c[0],i=c[1];function a(){i(!1)}var r=t.code,l=t.airline,b=t.origin,d=t.destination,f=t.plane,h=t.seats,m=t.passengers;return Object(u.jsxs)("div",{className:"info-card",children:[Object(u.jsxs)("p",{children:["C\xf3digo: ",r]}),Object(u.jsxs)("p",{children:[" Aerolinea: ",l]}),Object(u.jsx)("button",{onClick:function(){i(!0)},children:"+"}),Object(u.jsxs)(O.a,{isOpen:o,onRequestClose:a,style:p,children:[Object(u.jsxs)("div",{children:[Object(u.jsxs)("h4",{children:["Datos del vuelo ",r]}),Object(u.jsxs)("p",{children:["Aerolinea: ",l," Avi\xf3n: ",f," Asientos: ",h]}),Object(u.jsxs)("p",{children:["Origen: ",b," Destino: ",d]}),Object(u.jsx)("h4",{children:"Pasajeros"}),m.map((function(e,t){return Object(u.jsxs)("p",{children:["Nombre: ",e.name," Edad: ",e.age]},t)}))]}),Object(u.jsx)("button",{onClick:a,children:"Cerrar"})]})]})};n(103);var h=function(e){var t=e.socket,n=Object(c.useState)([]),s=Object(j.a)(n,2),o=s[0],i=s[1];function a(){t.emit("FLIGHTS",{})}return Object(c.useEffect)((function(){return t.on("FLIGHTS",(function(e){i(e)})),a(),function(){return t.disconnect()}}),[]),Object(u.jsxs)("div",{className:"info-container",children:[Object(u.jsx)("button",{onClick:function(){return a()},children:"Actualizar"}),Object(u.jsx)("div",{className:"info",children:o.map((function(e,t){return Object(u.jsx)(f,{props:e},t)}))})]})},m=n(4),x=n(3),g=n.n(x),v=n(109),k=n(113),S=n(110),N=n(111),C=n(112);n(104),n(105);delete g.a.Icon.Default.prototype._getIconUrl,g.a.Icon.Default.mergeOptions({shadowSize:null,iconSize:new g.a.Point(40,40),className:"airplane-icon"});var w={color:"red"},y={color:"black"};var E=function(e){var t=e.socket,n=Object(c.useState)([]),s=Object(j.a)(n,2),o=s[0],i=s[1],a=Object(c.useState)({}),l=Object(j.a)(a,2),b=l[0],d=l[1],O=Object(c.useState)({}),p=Object(j.a)(O,2),f=p[0],h=p[1];return Object(c.useEffect)((function(){return t.on("FLIGHTS",(function(e){console.log(e),i((function(t){return[].concat(Object(r.a)(t),Object(r.a)(e))}))})),t.on("POSITION",(function(e){d((function(t){var n=Object(m.a)({},t);return n[e.code]=e.position,n})),h((function(t){var n=Object(m.a)({},t);return n[e.code]=t[e.code]?[].concat(Object(r.a)(t[e.code]),[e.position]):[e.position],Object(m.a)({},n)}))})),t.emit("FLIGHTS",{}),function(){return t.disconnect()}}),[]),Object(u.jsxs)(v.a,{className:"map",center:[-36,-70],zoom:5,scrollWheelZoom:!1,children:[Object(u.jsx)(k.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),Object.keys(b).map((function(e,t){return Object(u.jsx)(S.a,{position:b[e],children:Object(u.jsx)(N.a,{children:e})},e)})),Object.keys(f).map((function(e,t){return Object(u.jsx)(C.a,{positions:f[e],pathOptions:y},e)})),o.map((function(e,t){return Object(u.jsx)(C.a,{positions:[e.origin,e.destination],pathOptions:w},t)}))]})};n(106);var I=function(){var e=Object(a.io)("wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl",{path:"/flights/",transports:["websocket"]});return Object(u.jsxs)("div",{className:"app-container",children:[Object(u.jsxs)("div",{className:"map-container",children:[Object(u.jsx)(E,{socket:e}),Object(u.jsx)(h,{socket:e})]}),Object(u.jsx)("div",{className:"chat-container",children:Object(u.jsx)(b,{socket:e})})]})};i.a.render(Object(u.jsx)(s.a.StrictMode,{children:Object(u.jsx)(I,{})}),document.getElementById("root"))},49:function(e,t,n){},59:function(e,t,n){}},[[107,1,2]]]);
//# sourceMappingURL=main.6960e3ec.chunk.js.map